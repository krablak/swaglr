{% extends "index.html" %}

{% block title %}
         <title>Swaglr #{{ clip.key.id }}</title>
{% endblock %}

{% block detail%}

<div  class="clip_pagedetail" id="page_detail_{{clip.key.id}}">
	<div class="close" ><a href="#" onclick="closeClipDetail({{ clip.key.id }});return false;">[X]</a>  </div>
	<div class="left_column">
		{% if clip|is_image_clip %}
		<div class="imgbox" ><img src="/images/tiny/{{ clip.image.key.id }}.jpg"/></div>
		{% endif %}
		{% if clip|is_text_clip %}
		<q cite="{{ clip.page }}"  >{{ clip.text|escape }}</q>
		{% endif %}
		
		{% if clip|is_page_clip %}
			{% if clip|has_title %}
				<q cite="{{ clip.page }}" onclick="closeClip({{ clip.key.id }});">{{ clip.title|escape}}</q>
			{% else %}
				<q cite="{{ clip.page }}" onclick="closeClip({{ clip.key.id }});">{{ clip.page|escape}}</q>
			{% endif %}
		{% endif %}
		
		{% if clip|is_link_clip %}
		<q cite="{{ clip.link }}" >{{ clip.link|slice:"0:40"|escape }}...</q>
		{% endif %}  
				
		<a class="page-url" target="_blank" href="{{ clip.page }}">{{ clip.page|escape|cut_http|swag_slice:30 }}</a>
	</div>
	<div class="right_column">
		{% if clip|is_commented_clip %}									
			<div class="comment"> 
				<p><a href="/user/{{ clip.user.user_id }}/page/0" class="username"> {{ clip.user.nick }}</a> says:</p>
				<div class="comment-nib"></div>
				<p id="clip-comment-view-{{ clip.key.id }}" class="text">{{  clip.comment|escape }}</p>
				<span id="clip-comment-edit-{{ clip.key.id }}" style="display:none">
					<textarea id="comment-textarea-{{ clip.key.id }}" rows="4" cols="30" ></textarea>
					<p class="right margin t d">
					<a href="#" id="comment-yes-{{ clip.key.id }}" class="awesome small blue">Save</a>
					<a href="#" id="comment-no-{{ clip.key.id }}">Cancel</a>
					</p>
				</span>
			{% if clip|is_my %}
				<p class="right margin t d">
					<a id="edit-comment-btn-{{ clip.key.id }}" onclick="showCommentDialog({{ clip.key.id }});" class="awesome small blue">Edit comment</a>
				</p>
			{% endif %}
			</div>
		{% else %}	
			<a href="/user/{{ clip.user.user_id }}/page/0" class="username"> {{ clip.user.nick }}</a>
			<div id="clip-comment-view-div-{{ clip.key.id }}" class="comment">
				<p style="display:none" id="clip-comment-view-{{ clip.key.id }}" class="text">{{  clip.comment|escape }}</p>
				<span id="clip-comment-edit-{{ clip.key.id }}" style="display:none">
					<textarea id="comment-textarea-{{ clip.key.id }}" rows="4" cols="30" ></textarea>
					<p class="right margin t d">
					<a href="#" id="comment-yes-{{ clip.key.id }}" class="awesome small blue">Save</a>
					<a href="#"  id="comment-no-{{ clip.key.id }}">Cancel</a>
					</p>
				</span>
			</div>
			{% if clip|is_my %}
			<p class="right margin t d">
				<a href="#" id="add-comment-btn-{{ clip.key.id }}" onclick="showCommentDialog({{ clip.key.id }});" class="awesome small blue">Add comment</a>
			</p>
			{% endif %}
		{% endif %}	<!-- /if clip|is_commented_clip-->		
		
		{% if clip|is_my %} 
		<p class="right margin t d"><a id="delete-comment-btn-{{ clip.key.id }}" onclick="showDeleteDialog({{ clip.key.id }});" class="awesome small">Delete post</a></p>
		{% endif %}		
			
		
		<table class="social_buttons">
								<tbody>
									<tr>
										<td>{{ clip|clip_template:"templates/components/twitter.html" }}</td>
										<td>{{ clip|clip_template:"templates/components/facebook.html" }}</td>
									</tr>
								</tbody>
							</table>
			
	</div>
	
				
	<div class="cleaner">
		<hr />
	</div>
		
</div>	<!-- /detail-->		
<h3 class="detail-more-by">More&nbsp;by&nbsp;<span class="username">{{ clip.user.nick }}</span></h3>
	
{% endblock %}